#!/bin/bash
# hardcode_gcp_config.sh
# Script to hardcode GCP configuration in the environment

# Color codes for output
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Log function
log() {
  local level=$1
  local message=$2
  local timestamp=$(date "+%Y-%m-%d %H:%M:%S")
  
  case $level in
    "INFO")
      echo -e "${BLUE}[${timestamp}] [INFO] ${message}${NC}"
      ;;
    "WARN")
      echo -e "${YELLOW}[${timestamp}] [WARN] ${message}${NC}"
      ;;
    "ERROR")
      echo -e "${RED}[${timestamp}] [ERROR] ${message}${NC}"
      ;;
    "SUCCESS")
      echo -e "${GREEN}[${timestamp}] [SUCCESS] ${message}${NC}"
      ;;
    *)
      echo -e "[${timestamp}] ${message}"
      ;;
  esac
}
# Hardcoded GCP configuration
GCP_CONFIG="
# Hardcoded GCP configuration - PERMANENT SETUP
export CLOUDSDK_CORE_PROJECT=\"cherry-ai-project\"
export CLOUDSDK_CORE_ACCOUNT=\"scoobyjava@cherry-ai.me\"
export CLOUDSDK_CORE_REGION=\"us-central1\"
export CLOUDSDK_CORE_ZONE=\"us-central1-a\"
"

# Remove any existing gcloud_config.sh call from .bashrc
log "INFO" "Removing any existing gcloud_config.sh call from .bashrc..."
sed -i '/gcloud_config.sh/d' ~/.bashrc

# Check if the GCP configuration is already in .bashrc
if grep -q "CLOUDSDK_CORE_PROJECT=\"cherry-ai-project\"" ~/.bashrc; then
  log "INFO" "GCP configuration already exists in .bashrc"
else
  # Add the GCP configuration to .bashrc
  log "INFO" "Adding GCP configuration to .bashrc..."
  echo "$GCP_CONFIG" >> ~/.bashrc
fi

# Apply the configuration to the current session
log "INFO" "Applying configuration to current session..."
export CLOUDSDK_CORE_PROJECT="cherry-ai-project"
export CLOUDSDK_CORE_ACCOUNT="scoobyjava@cherry-ai.me"
export CLOUDSDK_CORE_REGION="us-central1"
export CLOUDSDK_CORE_ZONE="us-central1-a"

# Configure git to use gcloud credentials
log "INFO" "Configuring git to use gcloud credentials..."
git config --global credential.helper gcloud

log "SUCCESS" "GCP configuration hardcoded successfully!"
log "INFO" "Project: cherry-ai-project"
log "INFO" "Account: scoobyjava@cherry-ai.me"
log "INFO" "Region: us-central1"
log "INFO" "Zone: us-central1-a"
log "INFO" "These settings will be applied automatically in all future sessions."