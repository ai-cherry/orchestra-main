// VPC Access Connector configuration
resource "google_vpc_access_connector" "orchestra_connector" {
  name          = "orchestrator-vpc-connector-${var.env}"
  region        = var.region
  project       = var.project_id
  network       = "default"
  ip_cidr_range = var.vpc_connector_cidr[var.env]
  min_instances = var.env == "prod" ? 2 : 2
  max_instances = var.env == "prod" ? 5 : 3
}

// Output VPC connector name for use in deploy scripts
output "vpc_connector_name" {
  value       = google_vpc_access_connector.orchestra_connector.name
  description = "The name of the VPC connector for the current environment"
}
